---
title: "python ã® sort ã®æ­£ä½“ã¯ä½•ãªã®ã‹ï¼Ÿ"
emoji: "ğŸº"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [python3, algorithm, sort, timsort]
published: false
---

> ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆè‡ªç§°ï¼‰vol.10

çš†ã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ã€‚yumyum116 ã§ã™ã€‚SWEè»¢è·ã‚’ç›®æŒ‡ã™è€…ã§ã™ã€‚
ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ä¾¿ä¹—ã—ã¦ã€1æ—¥1è¨˜äº‹æŠ•ç¨¿ã«æŒ‘æˆ¦ã™ã‚‹ã¨ã¨ã‚‚ã«ã€åŸ·ç­†æ´»å‹•ã®ç¿’æ…£åŒ–ã«ã‚‚æŒ‘æˆ¦ã—ã¦ã¿ã¾ã™ã€‚

ã“ã®è¨˜äº‹ã¯ã€`ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä»•æ§˜ãŒæ°—ã«ãªã£ã¦èª¿ã¹ã¦ã¿ãŸ`ã‚·ãƒªãƒ¼ã‚ºã§ã™ã€‚
ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åˆå­¦è€…ã®æ–¹ã®å‚è€ƒã«ãªã‚Œã°å¬‰ã—ã„ã§ã™ã€‚

ä»Šå›ã¯ã€python ã§ä½¿ç”¨å¯èƒ½ãªã‚½ãƒ¼ãƒˆé–¢æ•° sort ã«ã¤ã„ã¦å–ã‚Šä¸Šã’ã¾ã™ã€‚

## 1. sort ã®æ­£ä½“ã¯ä½•ãªã®ã‹
python ã§ã¯ã€é…åˆ—ã®å€¤ã‚’ã‚½ãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚’è€ƒãˆãŸæ™‚ã«ã€æ‰‹è»½ã«åˆ©ç”¨ã§ãã‚‹é–¢æ•°ã¨ã—ã¦ã€sort ãŒã‚ã‚Šã¾ã™ã€‚

LeetCode ãªã©ã€è§£ç­”ã«é€Ÿã•ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹å ´åˆã«ã¯è‡ªä½œã‚½ãƒ¼ãƒˆé–¢æ•°ã§ã¯ãªãã€æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ä½¿ç”¨å¯èƒ½ãªé–¢æ•°ã‚’ä½¿ã†ã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚
ç§ã‚‚ã€LeetCode ã®ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã«å‚åŠ ã—ãŸæ™‚ã«ã€é…åˆ—ã‚’ã‚½ãƒ¼ãƒˆã™ã‚‹ãŸã‚ã« sort ã‚’åˆ©ç”¨ã—ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ãªãŒã‚‰ã€é©šã„ãŸã“ã¨ã«ã€**TLEã«ãªã£ãŸ**ã®ã§ã™ã€‚

æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ãªã‚‰ã°ã€æ™‚é–“è¨ˆç®—é‡ã‚„ç©ºé–“è¨ˆç®—é‡ãªã©ã€ç·åˆçš„ã«åˆ¤æ–­ã—ã¦ãƒ™ã‚¹ãƒˆãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨ä¿¡ã˜ã¦ç–‘ã£ã¦ã„ãªã‹ã£ãŸã®ã§ã€TLEã¨ã„ã†æ–‡å­—ã‚’è¦‹ã‚‹ã“ã¨ã«ãªã‚‹ã¨ã¯æ€ã£ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚

ã“ã®æ™‚ã®çµŒé¨“ãŒãã£ã‹ã‘ã¨ãªã‚Šã€æœ¬è¨˜äº‹ã‚’åŸ·ç­†ã™ã‚‹ã«è‡³ã‚Šã¾ã—ãŸã€‚

-----

ã•ã¦ã€sort é–¢æ•°ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ä½•ã§ã—ã‚‡ã†ã‹ã€‚

æŒ¿å…¥ã‚½ãƒ¼ãƒˆã§ã—ã‚‡ã†ã‹ã€é¸æŠã‚½ãƒ¼ãƒˆã§ã—ã‚‡ã†ã‹ã€ãƒãƒ¼ã‚¸ã‚½ãƒ¼ãƒˆã§ã—ã‚‡ã†ã‹ã€ã‚ã‚‹ã„ã¯ã‚¯ã‚¤ãƒƒã‚¯ã‚½ãƒ¼ãƒˆã§ã—ã‚‡ã†ã‹ã€‚


å®Ÿã¯ã€ä¸Šè¨˜ã«æŒ™ã’ãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ã©ã‚Œã§ã‚‚ãªãã€ã¾ãŸã€sort é–¢æ•°ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯python ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã‚Šç•°ãªã‚Šã¾ã™ã€‚

ãƒãƒ¼ã‚¸ãƒ§ãƒ³2.3ã‹ã‚‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³3.10ã¾ã§ã¯ `Timsort`ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³3.11ä»¥é™ã¯ã€`Powersort` ã¨å‘¼ã°ã‚Œã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚Šã€å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚

æœ¬è¨˜äº‹ã§ã¯ã€`Timsort` ã«ã¤ã„ã¦å–ã‚Šä¸Šã’ã¾ã™ã€‚


è©±ãŒé€¸ã‚Œã¾ã™ãŒã€python ã«ã¯ã€åˆ©ç”¨å¯èƒ½ãªã‚½ãƒ¼ãƒˆé–¢æ•°ã¨ã—ã¦ sort ã¨ sorted ãŒã‚ã‚Šã¾ã™ã€‚ä¸¡è€…ã®é•ã„ã«ã¤ã„ã¦ã€ã“ã“ã§ç°¡å˜ã«è§¦ã‚Œã¦ãŠãã¾ã™ã€‚

ç«¯çš„ã«èª¬æ˜ã™ã‚‹ã¨ã€ä¸¡è€…ã®é•ã„ã¯é–¢æ•°ã‚’é©ç”¨ã§ãã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã€æˆ»ã‚Šå€¤ã®æœ‰ç„¡ã§ã™ã€‚

sort ã¯ãƒªã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦åˆ©ç”¨å¯èƒ½ãªé–¢æ•°ã§ã€ã€€æˆ»ã‚Šå€¤ãŒã‚ã‚Šã¾ã›ã‚“ã€‚
ä¸€æ–¹ã§ã€sorted ã¯åå¾©å¯èƒ½ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆiterable : list, taple, dictionary,string, ...etcï¼‰ ã«å¯¾ã—ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã€ã‚½ãƒ¼ãƒˆã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¾ã™ã€‚

ãã‚Œãã‚Œã€ä»¥ä¸‹ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

```
list = [1, 4, 2, 5]


# sort()
list.sort()
print(list) # Output : [1, 2, 4, 5]

# sorted()
new_list = sorted(list)
print(list) # Output : [1, 4, 2, 5]
print(new_list) # Output : [1, 2, 4, 5]

```

ã—ã‹ã—ãªãŒã‚‰ã€æˆ»ã‚Šå€¤ã®æœ‰ç„¡ã®é•ã„ã¯ã‚ã‚‹ã‚‚ã®ã®ã€å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯åŒã˜ã§ã™ã€‚


ã•ã¦ã€è©±ã‚’æˆ»ã—ã¾ã™ã€‚

`Timsort` ã¨ã¯ã€æŒ¿å…¥ã‚½ãƒ¼ãƒˆã¨ãƒãƒ¼ã‚¸ã‚½ãƒ¼ãƒˆã‚’çµ„åˆã›ãŸã‚½ãƒ¼ãƒˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã€Tim Peter ã«ã‚ˆã£ã¦2002å¹´ã«é–‹ç™ºã•ã‚Œã¾ã—ãŸã€‚

æœ¬è¨˜äº‹ã§ã¯ã€python ã®ã‚½ãƒ¼ãƒˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ã—ã¦ã”ç´¹ä»‹ã—ã¾ã™ãŒã€Java SE7 ã‚„ Android ã‚‚æ¨™æº–ã‚½ãƒ¼ãƒˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ã—ã¦ `Timsort` ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚[å‡ºå…¸](https://leapcell.io/blog/ja/python-no-soto-ga-omou-yori-hayai-riyu)


`Timsort` ã¯é«˜é€Ÿã€ã‹ã¤å®‰å®šæ€§ã®é«˜ã„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚ã‚‹ã¨è¨€ã‚ã‚Œã¦ã„ã¦ã€å¹³å‡æ™‚é–“è¨ˆç®—é‡ã€æœ€æ‚ªæ™‚é–“è¨ˆç®—é‡ã¨ã‚‚ã« $O(nlogn)$ ã§ã™ã€‚
æŒ¿å…¥ã‚½ãƒ¼ãƒˆã‚„ã‚¯ã‚¤ãƒƒã‚¯ã‚½ãƒ¼ãƒˆã®æœ€æ‚ªæ™‚é–“è¨ˆç®—é‡ãŒ $O(n^2)$ ãªã®ã§ã€ã“ã‚Œã‚‰ã®ã‚½ãƒ¼ãƒˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨æ¯”è¼ƒã™ã‚‹ã¨ã€å ´åˆã«ã‚ˆã£ã¦ã¯é€Ÿã„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã€‚

ã•ã¦ã€æ¬¡ç« ã§ Timsort ã®ä¸­èº«ã‚’èª­ã¿è§£ãã¾ã™ã€‚


## 2. Timsort ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’èª­ã¿è§£ã

Timsort ã‚’ Cè¨€èªã§å®Ÿè£…ã—ãŸã‚ªãƒªã‚¸ãƒŠãƒ«ã‚³ãƒ¼ãƒ‰ã¯[ã“ã¡ã‚‰](https://svn.python.org/projects/python/trunk/Objects/listobject.c)ã«ã‚ã‚Šã¾ã™ã€‚
ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚³ãƒ¼ãƒ‰ã¯éå¸¸ã«è¤‡é›‘ã€ã‹ã¤ã€€Cè¨€èªã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€æœ¬è¨˜äº‹ã§ã¯ Timsort ã®æ¦‚å¿µã‚’èª¬æ˜ã—ã¤ã¤ã€ã‚ˆã‚Šç°¡æ˜“çš„ãªå®Ÿè£…ã‚’ãƒ™ãƒ¼ã‚¹ã«èª¬æ˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚


### Timsort ã®æ¦‚å¿µ
Timsort ã¯ã€ç²—ã„èª¬æ˜ã‚’ã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªæ‰‹é †ã‚’è¸ã¿ã¾ã™ã€‚

> â‘ ã‚½ãƒ¼ãƒˆã™ã‚‹å¯¾è±¡ã®é…åˆ—ã‚’ã€ã„ãã¤ã‹ã®ã‚½ãƒ¼ãƒˆæ¸ˆã®ã‹ãŸã¾ã‚Š "run" ã«ã¾ã¨ã‚ã‚‹ã€‚run ã«ã¾ã¨ã‚ã‚‹éš›ã«ã¯ã€æŒ¿å…¥ã‚½ãƒ¼ãƒˆã‚’ç”¨ã„ã‚‹ã€‚
ã€€â‘¡â‘ ã§ã¾ã¨ã‚ãŸ run ã‚’ã€ãƒãƒ¼ã‚¸ã‚½ãƒ¼ãƒˆã‚’ä½¿ã£ã¦ãƒãƒ¼ã‚¸ã™ã‚‹ã€‚

Timsort ã®æ¦‚å¿µã«ã¤ã„ã¦ã¯ã€Gaurav Sen ã•ã‚“ã®[å‹•ç”»](https://www.youtube.com/watch?v=emeME__917E)ã«ã¦åˆ†ã‹ã‚Šã‚„ã™ãèª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã‚¤ãƒ³ãƒ‰è¨›ã‚Šã®è‹±èªã§ã™ãŒã€ã‚¤ãƒ³ãƒ‰è¨›ã‚Šã®è‹±èªã®ä¸­ã§ã¯æ ¼æ®µã«èãã‚„ã™ã„ã‹ã¨æ€ã„ã¾ã™ã€‚

å‹•ç”»ã¯2ãƒ‘ãƒ¼ãƒˆã«åˆ†ã‹ã‚Œã¦ã„ã¦ã€Part 1 ã§æ¦‚å¿µã®èª¬æ˜ã‚’ã€Part 2 ã§ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æŒ™å‹•ã®èª¬æ˜ã‚’ã—ã¦ã„ã¾ã™ã€‚
å‹•ç”»ã‚’è¦–è´ã™ã‚‹ä¸Šã§ã¯ã€ä¸€ã¤æ³¨æ„ãŒå¿…è¦ã§ã€å½¼ã®å‹•ç”»ã«ãŠã„ã¦ã¯ run ã‚’ chunk ã¨è¡¨ç¾ã—ã¦ã„ã¾ã™ã€‚chunk ã¨ã„ã†æ–°ã—ã„æ¦‚å¿µãŒç™»å ´ã™ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
å°ºã¯15åˆ†ç¨‹åº¦ã§ã™ã®ã§ã€æ‰‹è»½ã«è¦‹ã‚Œã¾ã™ã€‚ãŠæ™‚é–“ã®ã‚ã‚‹æ™‚ã«ã©ã†ãã€‚


ã•ã¦ã€èª¬æ˜ã¯ã»ã©ã»ã©ã«ã—ã¦ã€å…·ä½“çš„ã«ã©ã®ã‚ˆã†ãªå®Ÿè£…ã«ãªã‚‹ã®ã‹ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚
[Code is Art](https://www.youtube.com/watch?v=9yOV_03qlS8)ã®å‹•ç”»ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ãŒåˆ†ã‹ã‚Šè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚

```js:tim_sort.py
def tim_sort(array):
	# Set the minimum run length
	min_run = 32									ï½¥ï½¥ï½¥(i)
	n = len(array)

	# Sort individual subarrays of size min_run using insertion sort
	for i in range(0, n, min_run):
		insertion_sort(array, i, min((i + min_run - 1), n - 1))

	# Double the size of the current run until the entire array is sorted
	size = min_run
	while size < n:
		for start in range(0, n, size * 2):			ï½¥ï½¥ï½¥(ii)
			mid = start + size - 1
			end = min((start + size * 2 - 1), (n - 1))
			merge(array, start, mid, end)
		size *= 2

# Helper function to perform insertion sort on subarrays
def insertion_sort(array, left, right):
	for i in range(left + 1, right + 1):
		key_item = array[i]
		j = i - 1
		while j >= left and array[j] > key_item:
			array[j + 1] = array[k]
			j -= 1
		array[j + 1] = key_item

# Helper function to merge subarrays
def merge(array, start, mid, end):					ï½¥ï½¥ï½¥(iii)
	if mid == end:
		return
	merged_array = []
	left_idx = start
	right_idx = mid + 1
	while left_idx <= mid and right_idx <= end:
		if array[left_idx] < array[right_idx]:
			merged_array.append(array[left_idx])
			left_idx += 1
		else:
			merged_array.append(array[right_idx])
			right_idx += 1
	while left_idx <= mid:
		merged_array.append(array[left_idx])
		left_idx += 1
	while right_idx <= end:
		merged_array.append(array[right_idx])
		right_idx += 1
	for i, sorted_item in enumerate(merged_array):
		array[start + i] = sorted_item

```

ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ãŠã„ã¦ã€æ¡ç•ªã—ãŸç®‡æ‰€ã«ã¤ã„ã¦å°‘ã—èª¬æ˜ã—ã¾ã™ã€‚

(i)
ã“ã“ã§ã€min_run ã®å€¤ã‚’32ã¨ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ã‚‹ç†ç”±ã¯ã€æŒ¿å…¥ã‚½ãƒ¼ãƒˆãŒæœ€é€Ÿã¨ãªã‚‹è¦ç´ æ•°ã®æœ€å°ãŒ32ã§ã‚ã‚‹ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚ä¸Šé™ã¯64ã§ã™ã€‚
ã—ãŸãŒã£ã¦ã€max_run ã®å€¤ã‚’è¨­å®šã™ã‚‹å ´åˆã«ã¯ã€max_run = 64 ã¨ã™ã‚‹ã¨ã‚ˆã„ã¨æ€ã„ã¾ã™ã€‚

(ii)
run ã‚’ãƒãƒ¼ã‚¸ã™ã‚‹éš›ã«ã€ã‚³ãƒ”ãƒ¼ç”¨ã®é…åˆ—ã®ã‚µã‚¤ã‚ºã‚’ min_run ã®å€¤ã‚’ç”¨ã„ã¦ç¢ºä¿ã—ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã¯ã€min_run ã®å€¤ã‚’ç”¨ã„ã‚‹ã¨ã„ã†ã‚ˆã‚Šã€**ãƒãƒ¼ã‚¸ã™ã‚‹ run ã®ã†ã¡ã€è¦ç´ æ•°ã®å°‘ãªã„æ–¹ã® run ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹**ã¨ç†è§£ã—ã¦ãŠãã¨ã‚ˆã„ã¨æ€ã„ã¾ã™ã€‚

ãã®ç†ç”±ã¯ã€ãƒ¡ãƒ¢ãƒªã®ç¢ºä¿é ˜åŸŸã‚’å°ã•ãã™ã‚‹ã“ã¨ã§ã€ãƒãƒ¼ã‚¸ã‚½ãƒ¼ãƒˆã®å®Ÿè¡Œã‚’é€Ÿãã™ã‚‹ãŸã‚ã§ã™ã€‚
[åˆ¥è¨˜äº‹](https://zenn.dev/yumyum116/articles/lang_overhead)ã§ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã«ã¤ã„ã¦ã”ç´¹ä»‹ã—ã¦ã„ã¾ã™ãŒã€ãƒ¡ãƒ¢ãƒªç¢ºä¿ã«ã‹ã‹ã‚‹æ™‚é–“ã‚‚ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã«å«ã¾ã‚Œã¾ã™ã€‚
ã“ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚’ã§ãã‚‹ã ã‘å°‘ãªãã™ã‚‹ãŸã‚ã«ã€å°ã•ã„æ–¹ã®runã‚’è¤‡è£½ã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ã¨ã£ã¦ã„ã¾ã™ã€‚

(iii)
ã“ã“ã§ã¯ã€ãƒ¡ãƒ¢ãƒªã®éš£ã‚Šåˆã†é ˜åŸŸã® run åŒå£«ã‚’ãƒãƒ¼ã‚¸ã—ã¦ã„ã¾ã™ã€‚
éš£ã‚Šåˆã†é ˜åŸŸã‚’ãƒãƒ¼ã‚¸ã™ã‚‹ã“ã¨ã«ã¯ã€ã¨ãã« Timsort ã«ãŠã„ã¦ã¯æ¬¡ã®ã‚ˆã†ãªåŠ¹åŠ›ãŒã‚ã‚Šã¾ã™ã€‚

*ãƒ¡ãƒ¢ãƒªã®å‰ã®é ˜åŸŸã«ã‚ã‚‹é…åˆ—ã«ãŠã„ã¦ã€å¾Œã‚ã®é…åˆ—ã®å…ˆé ­ã‚ˆã‚Šã‚‚å°ã•ã„è¦ç´ ã‹ã‚‰ãªã‚‹éƒ¨åˆ†é…åˆ—ãŒå­˜åœ¨ã™ã‚‹å ´åˆã«ã¯ã€ãã®éƒ¨åˆ†é…åˆ—ã¯ä¸¦ã³é †ã‚’å¤‰ãˆã‚‹å¿…è¦ãŒãªã„
*ãƒ¡ãƒ¢ãƒªã®å¾Œã‚ã®é ˜åŸŸã«ã‚ã‚‹é…åˆ—ã«ãŠã„ã¦ã€å‰ã®é…åˆ—ã®æœ«å°¾ã®è¦ç´ ã‚ˆã‚Šã‚‚å¤§ãã„è¦ç´ ã‹ã‚‰ãªã‚‹éƒ¨åˆ†é…åˆ—ãŒå­˜åœ¨ã™ã‚‹å ´åˆã«ã¯ã€ãã®éƒ¨åˆ†é…åˆ—ã¯ä¸¦ã³é †ã‚’å¤‰ãˆã‚‹ã“ã¨ãªããƒãƒ¼ã‚¸ã§ãã‚‹

ã“ã‚ŒãŒæˆç«‹ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ç†ç”±ã¯ã€**run è‡ªä½“ãŒã™ã§ã«ã‚½ãƒ¼ãƒˆæ¸ˆã®é…åˆ—ã§ã‚ã‚Šã€ã‹ã¤ã€å„ run ã¯ãŠäº’ã„ã«ãƒ¡ãƒ¢ãƒªãŒéš£ã‚Šåˆã†ã¨ã„ã†æ€§è³ªãŒã‚ã‚‹**ãŸã‚ã§ã™ã€‚

ã“ã®ãƒ¡ãƒ¢ãƒªã«ã¤ã„ã¦ã‚‚ã€Timsort ã®æ¦‚å¿µã«ãŠã„ã¦å¤–ã›ãªã„è¦ç‚¹ãŒã‚ã‚‹ã®ã§ã™ãŒã€å¾Œæ—¥åŠ ç­†ä¿®æ­£ã™ã‚‹ã‹ã€ã‚ã‚‹ã„ã¯è¨˜äº‹ã‚’åˆ†ã‘ã¦èª¬æ˜ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

## 3. è¦ç´ ã®ä¸¦ã³ãŒãƒ©ãƒ³ãƒ€ãƒ ãªé…åˆ—ã«å¯¾ã—ã¦ã¯ã€é…ããªã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚‹
Timsort ã‚‚å¸¸ã«ä¸‡èƒ½ã§ã‚ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
å ´åˆã«ã‚ˆã£ã¦ã¯ã€æ¯”è¼ƒçš„é«˜é€Ÿã«å®Ÿè¡Œã§ãã¾ã™ãŒã€ã©ã®ã‚ˆã†ãªé…åˆ—ã§ã‚ã£ã¦ã‚‚æœŸå¾…é€šã‚Šã«å®Ÿè¡Œã§ãã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
[å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://svn.python.org/projects/python/trunk/Objects/listsort.txt)ã«ã‚‚è¨˜è¼‰ãŒã‚ã‚‹ã‚ˆã†ã«ã€è¦ç´ ã®ä¸¦ã³ãŒãƒ©ãƒ³ãƒ€ãƒ ãªé…åˆ—ã«å¯¾ã—ã¦ã¯ã€å®Ÿè¡Œæ™‚é–“ãŒæœŸå¾…å€¤ã‚ˆã‚Šã‚‚é…ããªã‚‹ã“ã¨ãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚

Timsort ã‚’é©ç”¨ã™ã‚‹é…åˆ—ã®ç‰¹æ€§ã«å¿œã˜ã¦ã€ã©ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒæœ€é©ã§ã‚ã‚‹ã®ã‹ã‚’åˆ¤æ–­ã™ã‚‹ã“ã¨ã‚‚é‡è¦ã§ã™ã€‚

â€»å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è©³ç´°ãªå†…å®¹ã«ã¤ã„ã¦ã¯ã€å¾Œæ—¥åŠ ç­†ä¿®æ­£ã„ãŸã—ã¾ã™ã€‚

-----

æœ¬è¨˜äº‹ã§ã¯ã€Timsort ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã¿ã¾ã—ãŸã€‚
åˆå­¦è€…ã§ã‚‚èª­ã‚ã‚‹è¨˜äº‹ã‚’ç›®æŒ‡ã—ãŸãŸã‚ã€å†…å®¹ã®å³å¯†ã•ã¯ä½ã„ã§ã™ã€‚
è‡ªåˆ†ã®ç†è§£ãŒæµ…ã„ã¨ã“ã‚ã‚‚ã‚ã‚‹ãŸã‚ã€ã‚‚ã†å°‘ã—æ™‚é–“ã‚’ã‹ã‘ã¦ Timsort ã‚’ç†è§£ã—ãŸä¸Šã§ã€è¨˜äº‹ã®å†åŸ·ç­†ã¾ãŸã¯åŠ ç­†ä¿®æ­£ã™ã‚‹ã‹ãŸã¡ã§å†…å®¹ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

ã¾ãŸã€æœ¬è¨˜äº‹ã«ã¦ã”ç´¹ä»‹ã—ãŸ Timsort ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€ä¸€ä¾‹ã«éãã¾ã›ã‚“ã€‚åˆå­¦è€…ã§ã‚‚ç†è§£ã§ãã‚‹å†…å®¹ã®ã‚‚ã®ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚
ä»–ã«ã‚‚Timsortã‚’å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹æ–¹ã¯ã„ã‚‰ã£ã—ã‚ƒã‚‹ã®ã§ã€æ¢ã—ã¦ã¿ã¦ãã ã•ã„ã€‚


è¨˜äº‹å†…ã«èª¤è¬¬ç­‰ã‚ã‚‹å ´åˆã«ã¯ã€ä¿®æ­£ã„ãŸã—ã¾ã™ã€‚ãã®éš›ã¯ã€ã”é€£çµ¡ã„ãŸã ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ã€‚

ãã‚Œã§ã¯ã€ã¾ãŸã€‚
